{% extends "asm2504/st09/base.html" %}

{% block title %}–°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤{% endblock %}

{% block content %}
<div class="top-actions">
  <a href="{{ url_for('st0409.add_employee') }}">–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</a>

  <form method="post" action="{{ url_for('st0409.clear_all') }}" style="display:inline;">
    <button type="submit" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∑–∞–ø–∏—Å–∏?')">–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë</button>
  </form>

  <!-- üíæ –í—ã–≥—Ä—É–∑–∫–∞ (—Å–∫–∞—á–∞—Ç—å employees.pkl) -->
  <form method="get" action="{{ url_for('st0409.download_file') }}" style="display:inline; margin-left:10px;">
    <button type="submit">üíæ –í—ã–≥—Ä—É–∑–∏—Ç—å –≤ —Ñ–∞–π–ª</button>
  </form>

  <!-- üìÇ –ó–∞–≥—Ä—É–∑–∫–∞ (–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ–π .pkl) -->
  <form method="post" action="{{ url_for('st0409.upload_file') }}" enctype="multipart/form-data" style="display:inline; margin-left:10px;">
    <input type="file" name="file" accept=".pkl" required>
    <button type="submit">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ —Ñ–∞–π–ª–∞</button>
  </form>
</div>

<hr>

{% if employees %}
  {% for e in employees %}
    <div class="card">
      <h3>–°–æ—Ç—Ä—É–¥–Ω–∏–∫ {{ loop.index }} ‚Äî {{ e.name }} ({{ e.type }})</h3>

      <div class="display-content">
        {{ e.display_html | safe }}
      </div>

      <div class="actions">
        <a href="{{ url_for('st0409.edit_employee', emp_id=e.db_id) }}">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>

        <form method="post" action="{{ url_for('st0409.delete_employee', emp_id=e.db_id) }}" style="display:inline;">
          <button type="submit" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å?')">–£–¥–∞–ª–∏—Ç—å</button>
        </form>
      </div>
    </div>
  {% endfor %}
{% else %}
  <p>–°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø—É—Å—Ç.</p>
{% endif %}
{% endblock %}
