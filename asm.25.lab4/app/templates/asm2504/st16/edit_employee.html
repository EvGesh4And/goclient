{% extends "asm2504/st16/index.html" %}

{% block title %}Edit {{ employee.name }}{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <h1 class="mb-4 text-center">Edit Employee: {{ employee.name }}</h1>

            <form method="POST" action="" class="card p-4">

                <div class="input-group mb-3">
                    <span class="input-group-text">Type</span>
                    <input type="text" class="form-control" value="{{ employee.title }}" readonly>
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">Name</span>
                    <input type="text" class="form-control" name="name" value="{{ employee.name }}" required>
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">Age</span>
                    <input type="number" class="form-control" name="age" value="{{ employee.age }}" required>
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">Sex</span>
                    <select class="form-select" name="sex" required>
                        <option value="Male" {% if employee.sex == 'Male' %}selected{% endif %}>Male</option>
                        <option value="Female" {% if employee.sex == 'Female' %}selected{% endif %}>Female</option>
                    </select>
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">Department</span>
                    <select class="form-select" name="department" required>
                        <option value="IT" {% if employee.department == 'IT' %}selected{% endif %}>IT</option>
                        <option value="Marketing" {% if employee.department == 'Marketing' %}selected{% endif %}>Marketing</option>
                        <option value="Sales" {% if employee.department == 'Sales' %}selected{% endif %}>Sales</option>
                        <option value="HR" {% if employee.department == 'HR' %}selected{% endif %}>HR</option>
                        <option value="Management" {% if employee.department == 'Management' %}selected{% endif %}>Management</option>
                        <option value="Law" {% if employee.department == 'Law' %}selected{% endif %}>Law</option>
                    </select>
                </div>

                <div class="input-group mb-3">
                    <span class="input-group-text">Salary</span>
                    <input type="number" step="0.01" class="form-control" name="salary" value="{{ employee.salary }}" required>
                </div>

                {% if employee.title == 'Manager' %}
                <div class="input-group mb-3">
                    <span class="input-group-text">Team Size</span>
                    <input type="number" class="form-control" name="team_size" value="{{ employee.team_size }}" required>
                </div>
                {% endif %}

                {% if employee.title == 'Director' %}
                <div class="input-group mb-3">
                    <span class="input-group-text">Has Assistant</span>
                    <select class="form-select" name="assistant" required>
                        <option value="Yes" {% if employee.assistant == 'Yes' %}selected{% endif %}>Yes</option>
                        <option value="No" {% if employee.assistant == 'No' %}selected{% endif %}>No</option>
                    </select>
                </div>
                {% endif %}

                <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
                    <a href="{{ url_for('.employee_details', emp_id=employee.id) }}" class="btn btn-secondary me-md-2">Cancel</a>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>

            </form>
        </div>
    </div>
</div>
{% endblock %}