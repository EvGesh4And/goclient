{% extends "akm2501/st03/base.html" %}

{% block content %}
    <h1>Картотека</h1>
    
    <div>
        <a href="{{ url_for('st0103.show_form') }}">Добавить объект</a>
        <a href="{{ url_for('st0103.save_pickle') }}">Сохранить</a>
        <a href="{{ url_for('st0103.load_pickle') }}">Загрузить</a>
    </div>

    {% if items %}
    <table border="1">
        <thead>
            <tr>
                <th>ID</th>
                <th>Тип</th>
                <th>Имя</th>
                <th>Возраст</th>
                <th>Род деятельности</th>
                <th>Увлечение</th>
                <th>Действия</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.type }}</td>
                <td>{{ item.name }}</td>
                <td>{{ item.age }}</td>
                <td>
                    {% if item.type == 'Worker' %}
                        {{ item.occupation }}
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>
                    {% if item.type == 'Hobby' %}
                        {{ item.hobby }}
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>
                    <a href="{{ url_for('st0103.edit_item', item_id=item.id) }}">Редактировать</a>
                    <a href="{{ url_for('st0103.delete_item', item_id=item.id) }}" onclick="return confirm('Удалить запись?')">Удалить</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>Картотека пуста</p>
    {% endif %}
{% endblock %}